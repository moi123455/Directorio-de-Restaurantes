<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregar Restaurante - Directorio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<link rel="stylesheet" href="style.css">
    
</head>
<body>
    <header class="main-header">
    <nav>
        <ul>
            <li id="loginItem">
                <button id="btnOpenLogin" class="btn btn-primary">Debe registrarse como usuario o administrador para crear una pagina base</button>
            </li>
            <li id="userItem" style="display:none;">
                <span id="userName" style="font-weight:bold;"></span>
                <span id="adminBadge" style="display:none; background:yellow; color:black; padding:2px 6px; border-radius:4px; font-weight:bold; margin-left:5px;">ADMIN</span>
                <button id="btnLogout" class="btn btn-danger btn-sm" style="margin-left:10px;">Cerrar sesión</button>
            </li>
        </ul>
    </nav>
</header>
    <a href="/directorio.html" class="back-link">
        <i class="fas fa-arrow-left"></i> Volver al Directorio
    </a>

    <div class="container">
        <div class="header">
            <h1><i class="fas fa-utensils"></i> Agregar Restaurante</h1>
            <p>Únete a nuestro directorio gastronómico venezolano</p>
        </div>

        <div class="form-container">
            <div class="step-indicator">
                <div class="step active">1</div>
                <div class="step">2</div>
                <div class="step">3</div>
            </div>

            <div class="success-message" id="successMessage">
                <i class="fas fa-check-circle"></i>
                ¡Restaurante creado exitosamente! Redirigiendo...
            </div>

            <div class="error-message" id="errorMessage">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorText">Ha ocurrido un error. Por favor, intenta nuevamente.</span>
            </div>

            <div class="loading" id="loading">
                <i class="fas fa-spinner"></i>
                <p>Creando tu página de restaurante...</p>
            </div>

            <form id="restaurantForm">
                <!-- Paso 1: Información Básica -->
                <div class="form-step active" id="step1">
                    <h3 style="margin-bottom: 20px; color: #333;">
                        <i class="fas fa-info-circle"></i> Información Básica
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Nombre del Restaurante <span class="required">*</span></label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="propietario">Propietario <span class="required">*</span></label>
                            <input type="text" id="propietario" name="propietario" required placeholder="Nombre completo del propietario">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="category">Categoría <span class="required">*</span></label>
                            <select id="category" name="category" required>
                                <option value="">Seleccionar categoría</option>
                                <option value="tradicional">Comida Tradicional</option>
                                <option value="rapida">Comida Rápida</option>
                                <option value="gourmet">Gourmet</option>
                                <option value="parrilla">Parrilla</option>
                                <option value="mariscos">Mariscos</option>
                                <option value="vegetariana">Vegetariana</option>
                                <option value="internacional">Internacional</option>
                                <option value="cafeteria">Cafetería</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="description">Descripción <span class="required">*</span></label>
                        <textarea id="description" name="description" required placeholder="Describe tu restaurante, especialidades, ambiente, etc."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Teléfono <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone" required placeholder="+58 412 123 4567">
                        </div>
                        <div class="form-group">
                            <label for="email">Email <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required placeholder="restaurante@email.com">
                        </div>
                    </div>
                </div>

                <!-- Paso 2: Ubicación y Servicios -->
                <div class="form-step" id="step2" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #333;">
                        <i class="fas fa-map-marker-alt"></i> Ubicación y Servicios
                    </h3>
                    
                    <div class="form-group">
                        <label for="address">Dirección Completa <span class="required">*</span></label>
                        <textarea id="address" name="address" required placeholder="Calle, número, sector, ciudad, estado"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="ciudad">Ciudad <span class="required">*</span></label>
                        <input type="text" id="ciudad" name="ciudad" required placeholder="Ciudad donde se ubica el restaurante">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="horario_apertura">Horario de Apertura <span class="required">*</span></label>
                            <input type="time" id="horario_apertura" name="horario_apertura" required>
                        </div>
                        <div class="form-group">
                            <label for="horario_cierre">Horario de Cierre <span class="required">*</span></label>
                            <input type="time" id="horario_cierre" name="horario_cierre" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="dias_atencion">Días de Atención <span class="required">*</span></label>
                        <input type="text" id="dias_atencion" name="dias_atencion" required placeholder="Ej: Lunes a Domingo">
                    </div>

                    <div class="form-group">
                        <label for="priceRange">Rango de Precios <span class="required">*</span></label>
                        <select id="priceRange" name="priceRange" required>
                            <option value="">Seleccionar rango</option>
                            <option value="economico">$ - Económico (Menos de $10)</option>
                            <option value="moderado">$$ - Moderado ($10-25)</option>
                            <option value="alto">$$$ - Costoso ($25-50)</option>
                            <option value="premium">$$$$ - Muy Costoso (Más de $50)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Servicios Disponibles</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="delivery" name="services" value="delivery">
                                <label for="delivery"><i class="fas fa-motorcycle"></i> Delivery</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="takeaway" name="services" value="takeaway">
                                <label for="takeaway"><i class="fas fa-shopping-bag"></i> Para llevar</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="reservation" name="services" value="reservation">
                                <label for="reservation"><i class="fas fa-calendar-check"></i> Reservaciones</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="parking" name="services" value="parking">
                                <label for="parking"><i class="fas fa-parking"></i> Estacionamiento</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="wifi" name="services" value="wifi">
                                <label for="wifi"><i class="fas fa-wifi"></i> WiFi Gratis</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="terrace" name="services" value="terrace">
                                <label for="terrace"><i class="fas fa-leaf"></i> Terraza</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Paso 3: Imágenes y Finalizar -->
                <div class="form-step" id="step3" style="display: none;">
                    <h3 style="margin-bottom: 20px; color: #333;">
                        <i class="fas fa-images"></i> Imágenes y Finalizar
                    </h3>
                    
                    <div class="form-group">
                        <label>Imagen Principal del Restaurante</label>
                        <div class="image-upload" onclick="document.getElementById('imageUpload').click()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Haz clic para subir una imagen</p>
                            <small>Formatos: JPG, PNG, GIF (Max: 5MB)</small>
                        </div>
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                        <div class="image-preview" id="imagePreview">
                            <img id="previewImg" src="" alt="Vista previa">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="website">Sitio Web (Opcional)</label>
                            <input type="url" id="website" name="website" placeholder="https://www.mirestaurante.com">
                        </div>
                        <div class="form-group">
                            <label for="instagram">Instagram (Opcional)</label>
                            <input type="text" id="instagram" name="instagram" placeholder="@mirestaurante">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="specialDishes">Platos Especiales (Opcional)</label>
                        <textarea id="specialDishes" name="specialDishes" placeholder="Describe tus platos más populares, separados por comas"></textarea>
                    </div>
                </div>

                <!-- Botones de Navegación -->
                <div class="btn-group">
                    <button type="button" class="btn btn-secondary" id="prevBtn" onclick="changeStep(-1)" style="display: none;">
                        <i class="fas fa-arrow-left"></i> Anterior
                    </button>
                    <button type="button" class="btn" id="nextBtn" onclick="changeStep(1)">
                        Siguiente <i class="fas fa-arrow-right"></i>
                    </button>
                    <button type="submit" class="btn" id="submitBtn" style="display: none;">
                        <i class="fas fa-magic"></i> Crear Página
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script src="app.js"></script>
    </script>

<!-- Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Contenedor para modales -->
<div id="modals-container"></div>

<script>
fetch('/partials/auth-modals.html')
  .then(res => res.text())
  .then(html => {
    document.getElementById('modals-container').innerHTML = html;

    const script1 = document.createElement('script');
    script1.src = '/js/session-check.js';
    document.body.appendChild(script1);

    const script2 = document.createElement('script');
    script2.src = '/js/auth-modals.js';
    document.body.appendChild(script2);
  })
  .catch(err => console.error('Error cargando modales:', err));

</script>

</body>
</html>